{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Meus Pedidos</title>
    <link rel="stylesheet" href="{% static 'produtos/pedidos_diretor.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div class="container-lista">

        <h1>Meus Pedidos de Solicitação</h1>
        <p class="descricao">Acompanhe aqui o status de todos os seus pedidos.</p>

        {% if pedidos %}
        <table>
            <thead>
                <tr>
                    <th>Nº Pedido</th>
                    <th>Data</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for pedido in pedidos %}
                <tr>
                    <td>#{{ pedido.id }}</td>
                    <td>{{ pedido.data_pedido|date:"d/m/Y - H:i" }}</td>
                    
                    <td>
                        {% if pedido.status == 'APROVADO' %}
                            <span class="badge badge-aprovado">Aprovado</span>
                        {% elif pedido.status == 'REJEITADO' %}
                            <span class="badge badge-rejeitado">Rejeitado</span>
                        {% else %}
                            <span class="badge badge-pendente">Pendente</span>
                        {% endif %}
                    </td>

                    <td>
                        <a href="{% url 'detalhe_pedido' pedido.id %}" class="btn-acao">Ver Detalhes</a>

                        {% if pedido.status == 'PENDENTE' %}
                            <a href="{% url 'excluir_pedido' pedido.id %}" class="btn-acao excluir" onclick="return confirm('Tem certeza que deseja excluir?');">Excluir</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p style="padding: 20px; color: #666;">Nenhum pedido realizado ainda.</p>
        {% endif %}

        <div class="acoes-rodape">
            <a href="{% url 'menu_diretor' %}" class="link-voltar">← Voltar ao Menu Principal</a>
            
            <a href="{% url 'criar_pedido' %}" class="btn-novo">+ Fazer Nova Solicitação</a>
        </div>

    </div>

</body>
</html>