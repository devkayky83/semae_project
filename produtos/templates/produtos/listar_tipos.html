<!DOCTYPE html>
<head>
    <title>Tipos de Produtos</title>
</head>
<body>
    <h1>Produtos no Estoque</h1>

    <a href="{% url 'menu_principal' %}">Voltar para o Menu</a> |
    <a href="{% url 'cadastrar_tipo_produto' %}">Novo Produto</a>

    <form method="get">
        <input type="text" name="buscar" placeholder="Buscar por nome" value="{{ busca }}"> 

        <select name="tipo">
            <option value="TODOS" {% if tipo_selecionado == "TODOS" %}selected{% endif %}>Todos</option>
            {% for valor, label in tipos %}
            <option value="{{ valor }}" {% if tipo_selecionado == valor %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>

        <select name="ordem">
            <option value="">-- Ordenar por --</option>
            <option value="nome" {% if ordem == "nome" %}selected{% endif %}>Nome (A-Z)</option>
        </select>
        
        <button type="submit">Filtrar</button>
    </form>

    <ul>
        {% for tipo_produto in tipos_produto %}
        <li>
            {{ tipo_produto.nome }} ({{ tipo_produto.tipo }}) - 
            <a href="{% url 'listar_lotes' tipo_produto.id %}">Ver Lotes</a>
            <a href="{% url 'editar_tipo_produto' tipo_produto.id %}">Editar</a>
            <a href="{% url 'excluir_tipo_produto' tipo_produto.id %}">Excluir</a>
        </li>
        {% empty %}
        <li>Nenhum tipo de produto cadastrado.</li>
        {% endfor %}
    </ul>

</body>
</html>